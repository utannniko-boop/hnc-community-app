<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>頭頸部がんコミュニティポータル</title>
  <meta name="theme-color" content="#0f172a" />

  <style>
    :root{
      --bg:#0b1220;--card:#0f172a;--ink:#e5e7eb;--muted:#94a3b8;--accent:#60a5fa;--pill:#1e293b;
      --shadow:0 6px 20px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:radial-gradient(1200px 800px at 70% -200px,#162238 0%,#0b1220 55%,#070c17 100%);
      color:var(--ink);font:16px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Sans","Noto Sans JP",sans-serif;
    }
    header{
      position:sticky;top:0;z-index:20;
      background:rgba(11,18,32,.7);backdrop-filter:saturate(140%) blur(10px);
      border-bottom:1px solid rgba(255,255,255,.06)
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{margin:0;font-size:20px;font-weight:700;letter-spacing:.02em}
    nav{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .tab-btn{
      appearance:none;border:0;cursor:pointer;
      padding:8px 12px;border-radius:999px;background:var(--pill);color:var(--ink);
      box-shadow:var(--shadow);transition:transform .06s ease;
      font-weight:600;font-size:14px
    }
    .tab-btn:hover{transform:translateY(-1px)}
    .tab-btn.active{background:linear-gradient(90deg,#2563eb,#22d3ee);color:white}

    main .wrap{padding:18px}
    .tabs{margin-top:12px}
    .tab{display:none}
    .tab.active{display:block}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(12,1fr)}
    .col-6{grid-column:span 6}
    .col-12{grid-column:span 12}
    @media (max-width:900px){.col-6{grid-column:span 12}}

    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;padding:16px;box-shadow:var(--shadow)
    }
    .badge{
      display:inline-block;padding:2px 8px;border-radius:999px;
      background:rgba(96,165,250,.15);border:1px solid rgba(96,165,250,.35);
      color:#bfdbfe;font-size:12px;margin-left:6px
    }
    .meta{color:var(--muted);font-size:13px}
    .list{list-style:none;padding:0;margin:0}
    .list li{padding:10px 0;border-bottom:1px dotted rgba(255,255,255,.08)}
    .list.small li{padding:8px 0}
    a{color:#93c5fd;text-decoration:none}
    a.linklike{color:#eab308}
    input[type="search"],input[type="text"],select{
      width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
      background:#0b1220;color:var(--ink);outline:none
    }

    /* ひらひら */
    #petals{position:fixed;inset:0;pointer-events:none;overflow:hidden}
    .petal{
      position:absolute;top:-5vh;left:0;width:14px;height:8px;border-radius:999px;
      background:linear-gradient(90deg,#fca5a5,#fecaca);
      filter:blur(.2px);opacity:.7;
      animation:fall var(--dur,10s) linear infinite
    }
    @keyframes fall{
      0%{transform:translateX(0) translateY(-10vh) rotate(0)}
      50%{transform:translateX(var(--wind,20vw)) translateY(55vh) rotate(180deg)}
      100%{transform:translateX(calc(var(--wind,20vw) * 2)) translateY(110vh) rotate(360deg)}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>頭頸部がんコミュニティポータル</h1>
      <nav>
        <button class="tab-btn active" data-tab="home">ホーム</button>
        <button class="tab-btn" data-tab="community">コミュニティ</button>
        <button class="tab-btn" data-tab="treatments">治療情報</button>
        <button class="tab-btn" data-tab="life">生活の工夫</button>
        <button class="tab-btn" data-tab="bookmarks">ブックマーク</button>
      </nav>
    </div>
  </header>

  <main class="tabs">
    <div class="wrap">

      <!-- Home -->
      <section id="home" class="tab active">
        <div class="grid">
          <div class="col-6">
            <div class="card">
              <h3>部位で探す</h3>
              <input id="cancer-search" type="search" placeholder="例：喉頭がん / C32 / parotid..." />
              <ul id="cancer-list" class="list" style="margin-top:10px"></ul>
            </div>
          </div>
          <div class="col-6">
            <div class="card">
              <h3>組織型で探す</h3>
              <input id="histo-search" type="search" placeholder="例：腺様嚢胞癌 / ACC / MEC..." />
              <ul id="histo-list" class="list" style="margin-top:10px"></ul>
            </div>
          </div>
          <div class="col-12">
            <div class="card">
              <h3>総合検索</h3>
              <input id="global-search" type="search" placeholder="がん種名や組織型名を入力..." />
              <ul id="global-results" class="list small" style="margin-top:10px"></ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Community -->
      <section id="community" class="tab">
        <div class="card">
          <h3>種類を選択</h3>
          <select id="community-select">
            <option disabled selected>読み込み中...</option>
          </select>
        </div>
        <div id="community-content" class="grid" style="margin-top:14px">
          <!-- JSで注入 -->
        </div>
        <div id="trials" class="card" style="margin-top:14px">
          <!-- JSで治験：フィルタ・一覧 or フォールバックリンク -->
        </div>
      </section>

      <!-- Treatments -->
      <section id="treatments" class="tab">
        <div class="card">
          <h3>公的・一次情報（基礎）</h3>
          <ul id="treatment-links" class="list small"></ul>
        </div>
      </section>

      <!-- Life -->
      <section id="life" class="tab">
        <div class="card">
          <h3>生活の工夫・QOL</h3>
          <p class="meta">「手術」「放射線治療」「抗がん剤治療」「その他の治療」で絞り込めます。部位別フィルタはホーム/コミュニティから。</p>
        </div>
        <div class="card">
          <ul id="life-tips" class="list"></ul>
        </div>
      </section>

      <!-- Bookmarks -->
      <section id="bookmarks" class="tab">
        <div class="card">
          <h3>ブックマーク</h3>
          <ul id="bookmarks" class="list small"></ul>
        </div>
      </section>

    </div>
  </main>

  <div id="petals"></div>

  <script>
    (function makePetals(){
      const field = document.getElementById('petals'); if(!field) return;
      const N = 24;
      for(let i=0;i<N;i++){
        const s=document.createElement('span'); s.className='petal';
        const x=Math.random()*100+'vw'; const wind=(Math.random()*60-20)+'vw';
        const delay=(Math.random()*-12)+'s'; const dur=(8+Math.random()*8)+'s';
        s.style.left=x; s.style.setProperty('--x',x); s.style.setProperty('--wind',wind);
        s.style.animationDelay=delay; s.style.setProperty('--dur',dur);
        field.appendChild(s);
      }
    })();
  </script>

  <script src="./app.js?v=40" defer></script>
</body>
</html>
